<html>

<head>
    <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
    <script src="/static/js/jquery.min.js"> </script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script src="/static/js/easyResponsiveTabs.js" type="text/javascript"></script>
    <style>
        #table_view_purchase {
                border: 1px solid rgb(255, 255, 254);
                padding-left: 10px;
                padding-right: 10px;
                padding-top: 10px;
                padding-bottom: 10px;
                width: 900px;
                position:relative;
                left:5%;
            }
            th,
            td {
                padding-left: 20px;
                padding-right: 20px;
                padding-top: 15px;
                padding-bottom: 15px;
                color: white;
                text-align: center;


            }

        #background {
            background: url('/static/img/1.jpg') no-repeat 0px 0px;
            top: 0%;
            left: 0%;
            right: 0%;
            bottom: 0%;
            position: fixed;
        }
        h1{
            position:relative;
            left:28%;
        }


        #holder {
            position: relative;
            background-color: rgba(3, 3, 3, 0.57);
            left: 13%;
            width: 1000px;
            border-radius: 8px;

        }

        #logout {
            position: fixed;
            left: 10px;
            color: white;
        }
        
        #title_view_flight {
            position: relative;
            left: 17%;
            display: inline-block;
            color: #FFC107;

        }
        #create_new_flight{
            position:relative;
            color: #FFC107;
            top:20px;
            left:17%;

        }
        .view_my_flight{
            position:relative;
            top: 27px;
        }

        #title_purchase_ticket {
            position: relative;
            left: 17%;
            color: #FFC107;
        }
        .date{
           
            display: inline-block;
            position: relative;
            left: 23%;
            color: #FFC107;
        
        }

       


    </style>


</head>

<body>
        <div id="background"></div>
        <a href="/StaffHomeLogOut" id="logout">Logout</a>
        <div id="holder">
            
    
            <br><br>
            <h1 style = "color:#FFC107;">Welcome Staff {{username}} from {{airline}}</h1>
   



        <div class="view_my_flight" method="GET">
                <h3 id="title_view_flight">View my flights</h3>

                <div class="date">
                    <div id="choose_day_start">
                        <h5>Day Start</h5>
                        <input id="datepicker1" size='10' name="Text1" type="text" value="mm/dd/yyyy" onfocus="this.value = '';"
                            onblur="if (this.value == '') {this.value = 'mm/dd/yyyy';}" required="">
                    </div>
                </div>
                <div class="date">
                    <div id="choose_day_end">
                        <h5>Day End</h5>
                        <input id="datepicker2" size='10' name="Text2" type="text" value="mm/dd/yyyy" onfocus="this.value = '';"
                            onblur="if (this.value == '') {this.value = 'mm/dd/yyyy';}" required="">
                    </div>
                </div>
                <div class="date">
                    <div id="choose_day_end">
                        <h5>Source city</h5>
                        <input type="text" size="10" id="Source_City" name="SourceCity" placeholder="Source city" />
                    </div>
                </div>
                <div class="date">
                    <div id="choose_day_end">
                        <h5 style="color: #FFC107;">Source Airport</h5>
                        <input type="text" size="10" id="Source_Airport" name="SourceAirport" placeholder="Source Airport" />
                    </div>
                </div>
                <div class="date">
                    <div id="choose_day_end">
                        <h5 style="color: #FFC107;">Dest City</h5>
                        <input type="text" size="10" id="Dest_City" name="DestinationAirport" placeholder="Dest City" />
                    </div>
                </div>
                <div class="date">
                    <div id="choose_day_end">
                        <h5 style="color: #FFC107;">Dest Airport</h5>
                        <input type="text" size="10" id="Dest_Airport" name="DestinationAirport" placeholder="Dest Airport" />
                    </div>
                </div>
        
                <div style="height:300px;overflow:auto;">
                    <table id="table_view_purchase">
                        <th>Airline</th>
                        <th>Flight Num</th>
                        <th>Depart Air</th>
                        <th>Depart Time</th>
                        <th>Arrival Air</th>
                        <th>Arrival Time</th>
                        <th>Status</th>
                        <th>Check Customer</th>
        
                        {% for line in default_flights %}
                        <tr>
                            <td>{{line[0]}}</td>
                            <td>{{line[1]}}</td>
                            <td>{{line[2]}}</td>
                            <td>{{line[3]}}</td>
                            <td>{{line[4]}}</td>
                            <td>{{line[5]}}</td>
                            <td>{{line[6]}}</td>
                            <td><button type="button">Check</button> </td>
        
                        </tr>
                        {% endfor %}
                    </table>
                </div>

        </div>
        <!-- communicating with route /ViewFlightsByDates for getting upcomming flight infor -->
        <script>
            document.getElementById("datepicker2").onchange = renew_flight;
            document.getElementById("Source_City").onchange = renew_flight;
            document.getElementById("Source_Airport").onchange = renew_flight;
            document.getElementById("Dest_City").onchange = renew_flight;
            document.getElementById("Dest_Airport").onchange = renew_flight;

            function renew_flight(e){
                e.preventDefault();
            var data = {};
            data["datepicker1"] = document.getElementById("datepicker1").value;
            data["datepicker2"] = document.getElementById("datepicker2").value;
            data["Source_City"] = document.getElementById("Source_City").value;
            data["Source_Airport"] = document.getElementById("Source_Airport").value;
            data["Dest_City"] = document.getElementById("Dest_City").value;
            data["Dest_Airport"] = document.getElementById("Dest_Airport").value;
            console.log(data);
            fetch("/ViewFlightsByDates", {
                    headers: {
                        "Content-Type": "application/json"
                    },
                    method: 'POST',
                    body: JSON.stringify(data)
                })
                .then(resp => resp.json())
                .then(result => {
                   
                     console.log(result);
                     var inner_html =
                        "<style>th,td{padding-left: 20px;padding-right :20px; padding-top : 10px;padding-bottom : 10px;}</style><th>Airline</th><th>Flight Num</th><th>Depart Air</th><th>Depart Time</th><th>Arrival Air</th><th>Arrival Time</th><th>Status</th><th>Check Customer</th>";
                    // for (i)
                    console.log(result);
                    for (var i = 0; i < result.length; i++) {
                        inner_html += "<tr>"
                        for (var j = 0; j < result[i].length; j++) {
                            if (result[i][j]) {
                                inner_html += "<td>" + result[i][j].toString() + "</td>";

                            } else {
                                inner_html += "<td>" + "       " + "</td>";
                            }

                        }
                        inner_html += "<td><button type='button'>Check</button></td></tr>";
                    }

                    // inner_html = "<h1>changed</h1>";
                    document.getElementById('table_view_purchase').innerHTML = inner_html;


                     })


            }
        </script>

        <div class = "create_new_flight">
            <h3 id="create_new_flight">Create_new_flight</h3>


        </div>
        <div class = "change_flight_status">

        </div>
        <div class = "add_plane">

        </div>
        <div class = "add_airport">

        </div>
        <div class = "view_booking_agent">

        </div>
        <div class = "view_freq_customer">

        </div>
        <div class = "view_report">

        </div>
        <div class ="revenue_comparison">

        </div> 
        <div class = "top_destination">

        </div>


</div>
<link rel="stylesheet" href="{{ url_for('static', filename='css/jquery-ui.css') }}" />

<!-- <script src="/static/js/jquery-ui.js"></script> -->
<script src="{{url_for('static', filename='js/jquery-ui.js')}}"></script>
<script>
    $(function () {
        $("#datepicker1,#datepicker2,#date_start,#date_end").datepicker();
    });
</script>
<!-- //Calendar -->
<!--quantity-->
<script>
    $('.value-plus').on('click', function () {
        var divUpd = $(this).parent().find('.value'),
            newVal = parseInt(divUpd.text(), 10) + 1;
        divUpd.text(newVal);
    });

    $('.value-minus').on('click', function () {
        var divUpd = $(this).parent().find('.value'),
            newVal = parseInt(divUpd.text(), 10) - 1;
        if (newVal >= 1) divUpd.text(newVal);
    });
</script>
<!--//quantity-->
<!--load more-->
<script>
    $(document).ready(function () {
        size_li = $("#myList li").size();
        x = 1;
        $('#myList li:lt(' + x + ')').show();
        $('#loadMore').click(function () {
            x = (x + 1 <= size_li) ? x + 1 : size_li;
            $('#myList li:lt(' + x + ')').show();
        });
        $('#showLess').click(function () {
            x = (x - 1 < 0) ? 1 : x - 1;
            $('#myList li').not(':lt(' + x + ')').hide();
        });
    });
</script>


</body>


</html>